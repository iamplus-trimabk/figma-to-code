# Phase 1 Pattern Analysis - Template Foundation
## Analysis of Established Patterns from Button, Input, Card, and Alert Components

### üéØ **Purpose: Extract Reusable Templates for Phase 2 Automation**

This document analyzes the consistent patterns established across all 4 Phase 1 components to create reusable templates for automated component generation.

---

## üèóÔ∏è **Core Architectural Patterns**

### **1. File Structure Pattern**
```
src/components/[category]/[component].tsx     # Main component
src/components/[component]-demo.tsx           # Comprehensive demo
src/app/[component]-test/page.tsx             # Test page
```

**Categories Established:**
- `navigation/` - Interactive elements (Button)
- `forms/` - Input components (Input)
- `display/` - Content containers (Card)
- `feedback/` - User feedback (Alert)

### **2. Component Template Pattern**
```typescript
/**
 * [Component Name] Component - Generated by Stage 3 Component Generator (Phase 1: Prompt-Driven)
 *
 * [Component description], implementing interface from Stage 2 [source component]
 * Design tokens integrated from Stage 2 outputs for consistent styling
 */

"use client"

import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

// Design tokens from Stage 2 web_config.json
const designTokens = {
  colors: { /* color palette */ },
  spacing: { /* spacing system */ },
  borderRadius: { /* border radius values */ },
  typography: { /* font system */ },
  effects: { /* shadow system */ }
}

// Component variants using CVA with design tokens
const [component]Variants = cva(
  // Base classes
  "[base Tailwind classes]",
  {
    variants: {
      variant: { /* variant definitions */ },
      size: { /* size definitions */ }
      // Additional variant groups as needed
    },
    defaultVariants: {
      variant: "default",
      size: "md"
    }
  }
)

// Export props interface matching Stage 2 [source component]
export interface [Component]Props extends React.HTMLAttributes<HTML[Element]>, VariantProps<typeof [component]Variants> {
  // Stage 2 interface props
  width?: string | number
  height?: string | number
  position?: { x?: number; y?: number }
  backgroundColor?: string
  backgroundOpacity?: number
  borderRadius?: string | number
  display?: "block" | "inline" | "inline-block" | "flex" | "grid" | "none"
  overflow?: "visible" | "hidden" | "scroll" | "auto"
  style?: React.CSSProperties
  children?: React.ReactNode
  id?: string
  testId?: string

  // Component-specific enhanced props
  // ...specific props based on component type
}

// Component-specific helper components (if needed)
// For example: CardHeader, CardContent, CardFooter

// Main component implementation
const [Component] = React.forwardRef<HTML[Element], [Component]Props>(
  ({ /* props */ }, ref) => {
    // State management for interactive features
    // Event handling logic
    // Style computation
    // Rendering logic

    return (
      <element ref={ref} {...props}>
        {/* Component content */}
      </element>
    )
  }
)

[Component].displayName = "[Component]"

export { [Component], [component]Variants }
```

---

## üé® **Design Token Integration Pattern**

### **Design Tokens Structure (Consistent Across All Components)**
```typescript
const designTokens = {
  colors: {
    primary: { 50: "#f7f6fd", 500: "#6257db", 900: "#3a3483" },
    success: { 50: "#f4fbf5", 500: "#28b446", 900: "#186c2a" },
    warning: { 50: "#fefbf2", 500: "#fbbb00", 900: "#967000" },
    error: { 50: "#fef2f2", 500: "#ef4444", 900: "#7f1d1d" },
    info: { 50: "#f0f9ff", 500: "#0ea5e9", 900: "#0c4a6e" },
    background: "#ffffff",
    foreground: "#1a1a1a",
    muted: { DEFAULT: "#f5f5f5", foreground: "#737373" },
    border: "#e5e5e5"
  },
  spacing: {
    "0": "0px", "1": "4px", "2": "8px", "3": "13px",
    "4": "16px", "6": "22px", "8": "32px"
  },
  borderRadius: {
    sm: "2px", md: "4px", lg: "8px", xl: "12px"
  },
  typography: {
    fontFamily: ["Poppins", "sans-serif"],
    fontSize: { xs: "12px", sm: "14px", base: "16px", lg: "18px" },
    fontWeight: { regular: "400", medium: "500", semibold: "600" }
  },
  effects: {
    shadow: {
      sm: "0 1px 2px 0 rgba(0, 0, 0, 0.05)",
      md: "0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",
      lg: "0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"
    }
  }
}
```

### **Color Application Patterns**
- **Default**: `bg-[${designTokens.colors.background}] border-[${designTokens.colors.border}]`
- **Primary**: `bg-[${designTokens.colors.primary[50]}] border-[${designTokens.colors.primary[500]}]`
- **Success**: `bg-[${designTokens.colors.success[50]}] border-[${designTokens.colors.success[500]}]`
- **Warning**: `bg-[${designTokens.colors.warning[50]}] border-[${designTokens.colors.warning[500]}]`
- **Error**: `bg-[${designTokens.colors.error[50]}] border-[${designTokens.colors.error[500]}]`
- **Info**: `bg-[${designTokens.colors.info[50]}] border-[${designTokens.colors.info[500]}]`

---

## üîß **CVA Variant Patterns**

### **Common Variant Structures**

#### **Form Components (Input, Button)**
```typescript
const componentVariants = cva(
  "[base form classes]",
  {
    variants: {
      variant: {
        default: "[default styles]",
        // Additional variants
      },
      size: {
        sm: "[small size styles]",
        md: "[medium size styles]",
        lg: "[large size styles]"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "md"
    }
  }
)
```

#### **Display Components (Card)**
```typescript
const componentVariants = cva(
  "[base display classes]",
  {
    variants: {
      variant: {
        default: "[default styles]",
        elevated: "[elevated styles]",
        outlined: "[outlined styles]",
        // Additional display variants
      },
      size: {
        sm: "p-3",
        md: "p-4",
        lg: "p-6",
        xl: "p-8"
      },
      layout: {
        default: "flex flex-col space-y-4",
        horizontal: "flex flex-row space-x-4",
        stacked: "flex flex-col space-y-2",
        grid: "grid grid-cols-1 gap-4"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "md",
      layout: "default"
    }
  }
)
```

#### **Feedback Components (Alert)**
```typescript
const componentVariants = cva(
  "[base feedback classes]",
  {
    variants: {
      variant: {
        default: "[default styles]",
        info: "[info styles]",
        success: "[success styles]",
        warning: "[warning styles]",
        error: "[error styles]"
      },
      size: {
        sm: "p-3 text-sm",
        md: "p-4 text-sm",
        lg: "p-6 text-base"
      },
      dismissible: {
        true: "pr-12",
        false: ""
      }
    },
    defaultVariants: {
      variant: "default",
      size: "md",
      dismissible: false
    }
  }
)
```

---

## üéØ **Interface Extension Patterns**

### **Standard Interface Extensions**
```typescript
// Base interface pattern for all components
export interface [Component]Props extends
  React.HTMLAttributes<HTML[Element]>,
  VariantProps<typeof [component]Variants> {

  // Stage 2 Bg component interface (standard for all)
  width?: string | number
  height?: string | number
  position?: { x?: number; y?: number }
  backgroundColor?: string
  backgroundOpacity?: number
  borderRadius?: string | number
  display?: "block" | "inline" | "inline-block" | "flex" | "grid" | "none"
  overflow?: "visible" | "hidden" | "scroll" | "auto"
  style?: React.CSSProperties
  children?: React.ReactNode
  id?: string
  testId?: string

  // Component-specific additions based on Stage 2 interfaces

  // For Input components (Email, Password, Search)
  // fontFamily?: string
  // fontSize?: string | number
  // fontWeight?: string | number
  // textAlign?: "left" | "center" | "right" | "justify"
  // interactive?: boolean
  // hover?: boolean
  // focus?: boolean
  // active?: boolean
  // onPress?: () => void
  // onHover?: (hovering: boolean) => void

  // For all interactive components (Button, Email, Password, Search)
  // onClick?: (event: React.MouseEvent) => void
}
```

---

## ‚ö° **Dynamic Styling Pattern**

### **Consistent Style Computation**
```typescript
// Combine inline styles (consistent across all components)
const inlineStyles: React.CSSProperties = {
  ...style,
  ...(width && { width: typeof width === 'number' ? `${width}px` : width }),
  ...(height && { height: typeof height === 'number' ? `${height}px` : height }),
  ...(backgroundColor && {
    backgroundColor,
    opacity: backgroundOpacity !== undefined ? backgroundOpacity : 1
  }),
  ...(borderRadius && { borderRadius: typeof borderRadius === 'number' ? `${borderRadius}px` : borderRadius }),
  ...(display && { display }),
  ...(overflow && { overflow }),
  ...(position && {
    position: 'absolute' as const,
    left: position.x !== undefined ? `${position.x}px` : undefined,
    top: position.y !== undefined ? `${position.y}px` : undefined
  }),
  // Additional dynamic styles for specific component types:
  // fontFamily, fontSize, fontWeight, textAlign for text components
}
```

---

## ‚ôø **Accessibility Patterns**

### **Standard Accessibility Implementation**
```typescript
// Base accessibility attributes
<div
  ref={ref}
  className={componentClasses}
  style={inlineStyles}
  id={id}
  data-testid={testId}
  // Interactive accessibility (Button, clickable elements)
  role={clickable ? 'button' : undefined}
  tabIndex={clickable ? 0 : undefined}
  onKeyDown={(e) => {
    if (clickable && (e.key === 'Enter' || e.key === ' ')) {
      e.preventDefault()
      onClick?.()
    }
  }}
  aria-label={clickable ? title : undefined}
  // Feedback accessibility (Alert)
  role="alert"
  aria-live={variant === 'error' ? 'assertive' : 'polite'}
  // Form accessibility (Input)
  aria-required={required}
  aria-invalid={error ? 'true' : undefined}
  aria-describedby={
    error ? `${id}-error` :
    helperText ? `${id}-helper` :
    undefined
  }
  {...props}
>
```

---

## üé™ **Event Handling Patterns**

### **Interactive State Management**
```typescript
// Standard state management pattern
const [isHovered, setIsHovered] = React.useState(false)
const [isFocused, setIsFocused] = React.useState(false)

// Event handlers (consistent pattern)
const handleMouseEnter = () => {
  setIsHovered(true)
  onHover?.(true)
}

const handleMouseLeave = () => {
  setIsHovered(false)
  onHover?.(false)
}

const handleClick = () => {
  if (clickable && onClick) {
    onClick()
  }
}

// Enhanced patterns for specific interactions
// - Auto-hide timers (Alert)
// - Controlled/uncontrolled state (Input)
// - Loading states (Button)
```

---

## üß™ **Testing and Demo Patterns**

### **Demo Component Structure**
```typescript
export default function [Component]Demo() {
  // State for interactive demonstrations
  const [state, setState] = React.useState(/* initial state */)

  // Event handlers for demo
  const handleDemoAction = () => { /* demo logic */ }

  return (
    <div className="min-h-screen bg-gray-50 p-8">
      <div className="max-w-7xl mx-auto space-y-8">
        <h1 className="text-3xl font-bold text-gray-900 mb-8">[Component] Component Validation</h1>

        {/* Component Variants */}
        <section className="space-y-4">
          <h2 className="text-xl font-semibold text-gray-800">[Component] Variants</h2>
          {/* Demo grid showing all variants */}
        </section>

        {/* Component Sizes */}
        <section className="space-y-4">
          <h2 className="text-xl font-semibold text-gray-800">[Component] Sizes</h2>
          {/* Demo showing all sizes */}
        </section>

        {/* Interactive Features */}
        <section className="space-y-4">
          <h2 className="text-xl font-semibold text-gray-800">Interactive [Component]</h2>
          {/* Demo showing interactive features */}
        </section>

        {/* Validation Summary */}
        <section className="space-y-4 p-6 bg-green-50 rounded-lg">
          <h2 className="text-xl font-semibold text-green-800">‚úÖ Validation Checklist</h2>
          <ul className="space-y-2 text-green-700">
            {/* Validation checklist items */}
          </ul>
        </section>
      </div>
    </div>
  )
}
```

### **Test Page Pattern**
```typescript
import [Component]Demo from "@/components/[component]-demo"

export default function [Component]TestPage() {
  return <[Component]Demo />
}
```

---

## üìã **Component-Specific Patterns Summary**

### **Button Component**
- **Interface**: Extends React.ButtonHTMLAttributes
- **Variants**: 7 variants (primary, secondary, outline, ghost, success, warning, destructive)
- **Sizes**: 3 sizes (sm, md, lg)
- **Features**: Loading states, full width, disabled states
- **Pattern**: Simple interactive element with visual variants

### **Input Component**
- **Interface**: Extends Omit<React.InputHTMLAttributes, 'size' | 'onChange'>
- **Variants**: 4 variants (default, error, success, warning)
- **Sizes**: 3 sizes (sm, md, lg)
- **Features**: Form integration, adornments, validation, helper text
- **Pattern**: Form input with validation and visual feedback

### **Card Component**
- **Interface**: Extends React.HTMLAttributes
- **Variants**: 8 variants (default, elevated, outlined, filled, success, warning, error, ghost)
- **Sizes**: 4 sizes (sm, md, lg, xl)
- **Layouts**: 4 layouts (default, horizontal, stacked, grid)
- **Features**: Structured components, interactive states, content integration
- **Pattern**: Display container with composition and layouts

### **Alert Component**
- **Interface**: Extends React.HTMLAttributes
- **Variants**: 5 variants (default, info, success, warning, error)
- **Sizes**: 3 sizes (sm, md, lg)
- **Features**: Dismissible, auto-hide, controlled visibility, icons, actions
- **Pattern**: Feedback component with time-based interactions

---

## üöÄ **Template System Ready**

These patterns provide a comprehensive foundation for building templates that can generate components with:

‚úÖ **Consistent Architecture** - File structure, imports, component patterns
‚úÖ **Design Token Integration** - Color, spacing, typography, effects application
‚úÖ **Variant Management** - CVA patterns for different component types
‚úÖ **Interface Compliance** - Stage 2 interface extensions with TypeScript safety
‚úÖ **Dynamic Styling** - Runtime style computation and positioning
‚úÖ **Accessibility** - WCAG compliance patterns for all component types
‚úÖ **Event Handling** - Interactive state management patterns
‚úÖ **Testing Framework** - Demo and test page patterns

**Ready to implement Phase 2 template system using these proven patterns!**